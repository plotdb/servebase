<div><script type="@plotdb/block">module.exports={pkg:{i18n:{en:{title:"Change Password",old:"Old Password",nomatch:"Password not matched.",forget:"Forget Password?",send:"Send Reset Link",new:"New Password",weak:"Password too weak",again:"New Password Again",update:"Update Password",len:"Length",bad:"Bad",ok:"Okay",good:"Good",fail:"Update Password Failed",done:"Update Password Successfully",sent:"Link Sent",hint:["A good password should be at least 10 characters long. Please do not use your name, phone number, or birthday as your password.",["You can check out the article","to learn what makes a good password."]]},"zh-TW":{title:"變更密碼",old:"舊的密碼",nomatch:"密碼不符",forget:"忘記密碼嗎？",send:"寄發重設連結信",new:"新密碼",weak:"密碼太弱了",again:"再輸入一次新密碼",update:"更新密碼",len:"長度",bad:"不妙",ok:"還好",good:"不錯",fail:"密碼更新失敗",done:"密碼更新完成",sent:"連結已寄出",hint:["好的密碼至少要夠長 ( 至少十個字 )。請不要用姓名、電話或生日當您的密碼。",["你可以查閱","這篇文章來了解怎樣算是一個好密碼。"]]}},dependencies:[{name:"ldform"}]},init:function(e){var i,n,u;i=e.root,n=e.ctx,u=e.t;return servebase.corectx(function(e){var r;r=e.core;return r.init().then(function(){var e,o,t;e=r.auth,o=r.captcha;t=n.ldform;return e.ensure().then(function(e){var n,d,a,s;n=new ldview({root:i,init:{"update-password":function(e){var n,t;n=e.node,t=e.local;return t.ldld=new ldloader({root:n})},"send-reset-link":function(e){var n,t;n=e.node,t=e.local;return t.ldld=new ldloader({root:n})}},action:{click:{"send-reset-link":function(e){var n,t,a;n=e.node,t=e.local;if(n.classList.contains("disabled")){return}a=t.ldld;a.on();return o.guard({cb:function(e){var n;n={email:r.user.username,captcha:e};return ld$.fetch("/api/auth/passwd/reset",{method:"POST"},{json:n})}})["finally"](function(){return debounce(1e3).then(function(){return a.off()})}).then(function(){n.innerHTML=u("sent")+' <i class="i-check"></i>';n.classList.add("disabled");return ldnotify.send("success",u("sent"))})},"update-password":function(e){var n,t,a,s;n=e.local,t=e.node;if(t.classList.contains("disabled")){return}a=n.ldld;a.on();s=d.values();return o.guard({cb:function(e){var n;n={o:s.oldpasswd,n:s.newpasswd1,captcha:e};return ld$.fetch("/api/auth/passwd/",{method:"put",headers:{"Content-Type":"application/json; charset=UTF-8"}},{json:n})}})["finally"](function(){return a.off()}).then(function(){ldnotify.send("success",u("done"));return d.reset()})["catch"](function(e){var n;n=lderror.id(e);return ldnotify.send("danger",n===1031?u("weak"):n===1030?u("nomatch"):u("fail"))})}}}});d=new t({root:i,submit:".btn[ld=update-password]",afterCheck:function(e){var n,t,a,s,d,o,r,i,l,c;n=[this.fields.newpasswd1.value,this.fields.newpasswd2.value],t=n[0],a=n[1];if(e.newpasswd1!==1&&t.length<6){e.newpasswd1=2;e.newpasswd2=1}if(t!==a&&(e.newpasswd2!==1||a&&e.newpasswd1===0)){e.newpasswd2=2}s=ld$.find(this.root,"[data-node]",0);if(e.newpasswd1!==1){d=Math.round(t.length);o=d<8?"bad":d<10?"ok":"good";r=100*(d<12?d:12)/12;i=d<8?"danger":d<10?"warning":"success";ld$.find(s,"label",0).textContent=u("len")+": "+u(o);l=ld$.find(s,".progress-bar",0);l.style.width=r+"%";c=l.getAttribute("class");c=c.replace(/bg-\S+/,"").trim()+(" bg-"+i);return l.setAttribute("class",c)}}});return;a=ld$.find(document,".form[data-name=passwd] .btn[ld=update-password]",0);s=new ldloader({root:a});return a.addEventListener("click",function(){var t;if(a.classList.contains("disabled")){return}s.on();t=d.values();return o.guard({cb:function(e){var n;n={o:t.oldpasswd,n:t.newpasswd1,captcha:e};return ld$.fetch("/api/auth/passwd/",{method:"put",headers:{"Content-Type":"application/json; charset=UTF-8"}},{json:n})}})["finally"](function(){return s.off()}).then(function(){ldnotify.send("success",u("done"));return d.reset()})["catch"](function(e){var n;n=lderror.id(e);return ldnotify.send("danger",n===1031?u("weak"):n===1030?u("nomatch"):u("fail"))})})})})})}};</script><h3 t>title</h3><hr><div class="form" data-name="passwd"><div class="row"><div class="col-md-8"><div class="form-group"><label t>old</label><input class="form-control" name="oldpasswd" type="password"><div class="invalid-feedback" t>nomatch</div></div></div><div class="col-md-4"><div class="form-group"><label t>forget</label><div class="btn btn-outline-dark btn-block ld-ext-right" ld="send-reset-link"><i class="i-mail" aria-hidden="true"></i><span class="mx-1" t>send</span><div class="ld ldld bare em-1"></div></div></div></div></div><div class="row"><div class="col-md-8"><div class="form-group"><label t>new</label><input class="form-control" name="newpasswd1" type="password"><div class="invalid-feedback" t>weak</div></div></div><div class="col-md-4"><div class="form-group" data-node="passwd-bar1"><label class="text-capitalize">&nbsp;</label><div class="progress" style="height:36px"><div class="progress-bar progress-bar-striped" style="width:0%"></div></div></div></div></div><div class="row"><div class="col-md-8"><div class="form-group"><label t>again</label><input class="form-control" name="newpasswd2" type="password"><div class="invalid-feedback" t>nomatch</div></div><div class="btn btn-primary btn-block mb-4 disabled ld-ext-right" ld="update-password"><span class="mr-1" t>update</span><div class="ld ldld bare em-1"></div></div><div class="text-muted"><small><p t>hint.0</p><p><span t>hint.1.0</span> <a href="https://en.wikipedia.org/wiki/Password_strength" target="_blank" rel="noopener noreferrer">Password Strength</a> <span t>hint.1.1</span></p></small></div></div><div class="col-md-4">&nbsp;</div></div></div></div>
